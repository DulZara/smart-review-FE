<div class="container">
  <mat-card>
    <h3 class="h3">Topics</h3>
    <p *ngIf="loading()">Loadingâ€¦</p>
    <p class="error" *ngIf="error()">{{ error() }}</p>

    <table class="table" *ngIf="topics() as list">
      <thead>
        <tr><th>Title</th><th>Class</th><th>Assignments</th><th></th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let t of list">
          <td>{{ t.title }}</td>
          <td>{{ t.className }}</td>
          <td>{{ t.numberOfAssignment }}</td>
          <td>
            <button mat-stroked-button color="primary" (click)="edit(t)">Edit</button>
            <button mat-stroked-button color="warn" (click)="remove(t)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </mat-card>

  <mat-card style="margin-top:16px;">
    <h3 class="h3">Create / Edit Topic</h3>
    <form [formGroup]="form" (ngSubmit)="save()" style="display:grid; gap:12px;">
      <mat-form-field appearance="outline">
        <mat-label>Title</mat-label>
        <input matInput formControlName="title" required>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Class</mat-label>
        <mat-select formControlName="class_id" required>
          <mat-option *ngFor="let c of classes() || []" [value]="c.id">{{ c.className }}</mat-option>
        </mat-select>
      </mat-form-field>

      <div style="display:flex; gap:8px;">
        <button mat-raised-button color="primary" [disabled]="form.invalid || loading()">{{ form.value.id ? 'Update' : 'Create' }}</button>
        <button type="button" mat-button (click)="resetForm()">Reset</button>
      </div>
    </form>
  </mat-card>
</div>
